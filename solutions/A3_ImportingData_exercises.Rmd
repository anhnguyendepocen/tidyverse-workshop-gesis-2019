---
title: 'Exercises Importing Data - Solutions'
# title: 'Exercises Importing Data'
author: 'Johannes Breuer, Stefan JÃ¼nger, Thomas Ebel'
date: 'Data Wrangling & Exploration with the Tidyverse in R, May 15-16, 2019'
output:
  # unilur::tutorial_html: default
  unilur::tutorial_html_solution: default
---

```{r knitr_init, echo=FALSE, cache=FALSE, include=FALSE}
# custom boxes
knitr::opts_template$set(clues = list(box.title = "Clues",
                                      box.body = list(fill = "#fff9dc", colour = "black"),
                                      box.header = list(fill = "#ffec8b", colour = "black"),
                                      box.icon = "fa-search",
                                      box.collapse = TRUE))
```

```{r klippy, echo=FALSE, include=TRUE}
klippy::klippy()
```

After successfully accomplishing the exercises on tidy data and listening to lengthy lectures on data formats as well as specifics of importing them, it's now your turn to get used to importing data in the `tidyverse`.

We prepared some datasets, for example, the [*Titanic*](https://www.kaggle.com/c/titanic/overview) dataset from *Kaggle*, which you can use to play with some of the functions from `readr` and related packages. You can find them in the `../data` folder. However, importing data often implies firing up only one command, and that's it. For this reason, in these exercises, we prepared some individual tasks you can work on.

This being said, let's start with some easy data importing.

```{block, box.title = "1", box.body = list(fill = "white"), box.icon = "fa-star"}
Load the titanic data.
```

```{block, opts.label = "clues"}
The file format is CSV, accordingly you need the `readr` library and the function `read_...`
```

```{r load_titanic, solution = TRUE}
library(readr)

titanic <-
  read_csv("../data/titanic/titanic.csv")
```

You may have noticed that the function you just used is importing factor variables as characters by default. For some analyses, this is not what we want. So let's pretend we're particularly interested in gender differences in a regression model or the like.

```{block, box.title = "2", box.body = list(fill = "white"), box.icon = "fa-star"}
Convert the variable `Sex` to a factor.
```

```{block, opts.label = "clues"}
You can do that while importing the data or after loading them.
```

```{r convert_sex, solution = TRUE}
titanic <-
  read_csv(
    "../data/titanic/titanic.csv",
    col_types = cols(
      Sex = col_factor()
    )
  )
```

After working on the `titanic` data, we got bored. Now we want to work on some longitudinal and cross-country level data. The gapminder GDP data comes to our mind!

```{block, box.title = "3", box.body = list(fill = "white"), box.icon = "fa-star"}
Load the gapminder GDP data.
```

```{block, opts.label = "clues"}
Note that in the data folder actually two different gapminder datasets are stored.
```

```{r load_gapminder_gdp, solution = TRUE}
library(readxl)

gapminder_GDP <-
  read_excel("../data/gapminder/GDPpercapitaconstant2000US.xlsx")
```

Although you had to apply two different importing functions, the outcome is no different: what you got are tibbles. However, especially the file format of the latter dataset is more complex. In the last exercise, we expand on that and apply some more options with the help of the `unicorn` data.

```{block, box.title = "4", box.body = list(fill = "white"), box.icon = "fa-star"}
Load the unicorn sales data file. As we are not interested in the `total_turnover` variable only read in the cell range `A1:C43`
```

```{block, opts.label = "clues"}
You can define ranges with the option `range = range_definition`.
```

```{r load_unicorn_sales, solution = TRUE}
library(readxl)

unicorn_sales <-
  read_excel(
    "../data/unicorns/sales.xlsx",
    range = "A1:C43"
      )
```